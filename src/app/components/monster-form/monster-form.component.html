<form [formGroup]="monsterForm" (ngSubmit)="submit()">
  <div class="form-group">
    <label class="form-label-lg">Name</label>
    <input type="text" formControlName="name" class="form-control form-control-lg" placeholder="Enter the monster's name">
    <small class="form-text text-muted">URL: monsters/{{monster.url}}</small>
  </div>
  <div class="form-row">
    <div class="form-group col-12 col-sm-4">
      <label>Size</label>
      <ng-select formControlName="size" [items]="sizeList" [selectOnTab]="true" placeholder="Size"></ng-select>
    </div>
    <div class="form-group col-12 col-sm-4">
      <label>Type</label>
      <ng-select formControlName="monster_type" [items]="typeList" [selectOnTab]="true" placeholder="Type"></ng-select>
    </div>
    <div class="form-group col-12 col-sm-4">
      <label>Alignment</label>
      <ng-select formControlName="alignment" [items]="alignmentList" [selectOnTab]="true" placeholder="Alignment"></ng-select>
    </div>
  </div>
  <div class="form-group">
    <label>Tags</label>
    <ng-select formControlName="tags" [items]="tagList" [selectOnTab]="true" [hideSelected]="true" placeholder="Tags" multiple="true" [addTag]="true"></ng-select>
    <small class="form-text text-muted">Press <code>Tab</code> or <code>Enter</code> to select a tag.</small>
  </div>

  <hr>

  <div class="form-row">
    <div class="form-group col-3 col-sm-2 col-md-1">
      <label>AC</label>
      <input formControlName="ac" type="number" class="form-control" placeholder="AC">
    </div>
    <div class="form-group col-9 col-sm-4 col-md-5">
      <label>AC note</label>
      <input formControlName="ac_note" type="text" class="form-control" placeholder="AC notes, source, etc.">
    </div>
    <div class="form-group col-3 col-sm-2 col-md-1">
      <label>HP</label>
      <input formControlName="hp" type="number" class="form-control" placeholder="HP">
    </div>
    <div class="form-group col-9 col-sm-4 col-md-5">
      <label>Hit dice</label>
      <input formControlName="hd" type="text" class="form-control" placeholder="Hit dice, 1d8+2, etc.">
    </div>
  </div>

  <div formArrayName="speeds" *ngFor="let speedGroup of monsterForm.get('speeds').controls; let i = index">
    <div [formGroupName]="i" class="form-row">
      <div class="form-group col-6">
        <label>Speed</label>
        <ng-select formControlName="speed_type" [items]="speedList" [selectOnTab]="true" placeholder="Speed Type"></ng-select>
      </div>
      <div class="form-group col-6">
        <label>Distance</label>
        <div class="input-group">
          <input formControlName="speed" type="number" class="form-control" placeholder="Distance">
          <div class="input-group-append">
            <span class="input-group-text">ft.</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group col-4">
      <!-- <label class="invisible d-none d-lg-inline-block">Add Speed</label> -->
      <button (click)="addFormGroup('speeds')" class="btn btn-outline-secondary btn-block" type="button">Add Speed</button>
    </div>
  </div>

  <hr>

  <h5>Ability Scores</h5>
  <div class="form-row">
    <div formArrayName="ability_scores" class="form-group col-6 col-sm-4 col-lg-2" *ngFor="let ability of abilityScoreList; let i = index">
      <label>{{ability}}</label>
      <input [formControlName]="i" type="number" class="form-control" placeholder="{{ability}}">
    </div>
  </div>
  <h5>Saving Throws</h5>
  <div class="form-row">
    <div formArrayName="saving_throws" class="form-group col-6 col-sm-4 col-lg-2" *ngFor="let ability of abilityScoreList; let i = index">
      <label>{{ability}}</label>
      <input [formControlName]="i" type="number" class="form-control" placeholder="{{ability}}">
    </div>
  </div>

  <hr>

  <div class="form-row">
    <div class="form-group col-12 col-md-6 col-lg-3">
      <label>Damage Immunities</label>
      <ng-select formControlName="immunities" [items]="damageTypeList" [selectOnTab]="true" [hideSelected]="true" placeholder="Damage Immunities" multiple="true"></ng-select>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-3">
      <label>Damage Resistances</label>
      <ng-select formControlName="resistances" [items]="damageTypeList" [selectOnTab]="true" [hideSelected]="true" placeholder="Damage Resistances" multiple="true"></ng-select>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-3">
      <label>Damage Vulnerabilities</label>
      <ng-select formControlName="vulnerabilities" [items]="damageTypeList" [selectOnTab]="true" [hideSelected]="true" placeholder="Damage Vulnerabilities" multiple="true"></ng-select>
    </div>
    <div class="form-group col-12 col-md-6 col-lg-3">
      <label>Condition Immunities</label>
      <ng-select formControlName="condition_immunities" [items]="conditionList" [selectOnTab]="true" [hideSelected]="true" placeholder="Condition Immunities" multiple="true"></ng-select>
    </div>
  </div>

  <hr>

<div formArrayName="skills" *ngFor="let skillGroup of monsterForm.get('skills').controls; let i = index">
  <div [formGroupName]="i" class="form-row">
    <div class="form-group col-7">
      <label>Skill</label>
      <ng-select formControlName="skill" [items]="skillList" [selectOnTab]="true" placeholder="Skill"></ng-select>
    </div>
    <div class="form-group col-4">
      <label>Bonus</label>
      <div class="input-group">
        <input formControlName="bonus" type="number" class="form-control" placeholder="Bonus">
        <div class="input-group-append">
          <span class="input-group-text">ft.</span>
        </div>
      </div>
    </div>
    <div class="col-1">
      <label class="invisible d-none d-lg-inline-block">Remove</label>
      <button class="btn btn-outline-danger" type="button"><i class="fas fa-times"></i></button>
    </div>
  </div>
</div>

<div class="form-row">
  <div class="form-group col-12 col-lg-4">
    <!-- <label class="invisible d-none d-lg-inline-block">Add Skill</label> -->
    <button (click)="addFormGroup('skills')" class="btn btn-outline-secondary btn-block" type="button">Add Skill</button>
  </div>
</div>

  <hr>

<div formArrayName="senses" *ngFor="let senseGroup of monsterForm.get('senses').controls; let i = index">
  <div [formGroupName]="i" class="form-row">
    <div class="form-group col-7">
      <label>Sense</label>
      <ng-select formControlName="sense" [items]="senseList" [selectOnTab]="true" placeholder="Sense"></ng-select>
      <small class="form-text text-muted">Telepathy is included here</small>
    </div>
    <div class="form-group col-4">
      <label>Distance</label>
      <div class="input-group">
        <input formControlName="distance" type="number" class="form-control" placeholder="Distance">
        <div class="input-group-append">
          <span class="input-group-text">ft.</span>
        </div>
      </div>
    </div>
    <div class="col-1">
      <label class="invisible d-none d-lg-inline-block">Remove</label>
      <button class="btn btn-outline-danger" type="button"><i class="fas fa-times"></i></button>
    </div>
  </div>
</div>

<div class="form-group">
  <!-- <label class="invisible d-none d-lg-inline-block">Add Sense</label> -->
  <button (click)="addFormGroup('senses')" class="btn btn-outline-secondary btn-block" type="button">Add Sense</button>
</div>

  <div class="form-group">
    <label>Languages</label>
    <ng-select [items]="languageList" [selectOnTab]="true" [hideSelected]="true" placeholder="Languages" [addTag]="true" multiple="true"></ng-select>
  </div>
  <div class="form-row">
    <div class="form-group col-3">
      <label>CR</label>
      <input type="number" class="form-control" placeholder="CR">
    </div>
    <div class="form-group col-3">
      <label>XP</label>
      <input type="number" class="form-control" placeholder="XP">
    </div>
    <div class="form-group col-6">
      <label>Legendary Actions</label>
      <input type="number" class="form-control" placeholder="Legendary Actions">
    </div>
  </div>

  <hr>

  <h3>Abilities</h3>
  <span class="ability">
    <div class="form-row">
      <div class="form-group col-12 col-sm-6">
        <label>Ability Name</label>
        <input type="text" class="form-control" placeholder="Ability name">
      </div>
      <div class="form-group col-12 col-sm-6 col-lg-3">
        <label>Ability Type</label>
        <ng-select [items]="abilityTypeList" [selectOnTab]="true" placeholder="Ability Type"></ng-select>
      </div>
    </div>
    <div class="form-group">
      <label>Abilty text</label>
      <textarea class="form-control" rows="3" placeholder="Enter the ability effect text"></textarea>
    </div>
  </span>
  <button (click)="addAbility()" class="btn btn-outline-secondary btn-block" type="button">Add Ability</button>

  <hr>

  <h3>Attacks</h3>
  <span class="attack">
    <div class="form-row">
      <div class="form-group col-12 col-sm-6">
        <label>Attack Name</label>
        <input type="text" class="form-control" placeholder="Attack Name">
      </div>
      <div class="form-group col-12 col-sm-6 col-lg-3">
        <label>Attack Type</label>
        <input type="text" class="form-control" placeholder="Attack Type">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-6 col-sm-4 col-lg-2">
        <input type="number" class="form-control" placeholder="To hit">
      </div>
      <div class="form-group col-6 col-sm-4 col-lg-2">
        <div class="input-group">
          <input type="number" class="form-control" placeholder="Reach">
          <div class="input-group-append">
            <span class="input-group-text">ft.</span>
          </div>
        </div>
      </div>
      <div class="form-group col-sm-4 col-lg-2">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Range">
          <div class="input-group-append">
            <span class="input-group-text">ft.</span>
          </div>
        </div>
      </div>
      <div class="form-group col-12 col-lg-6">
        <input type="text" class="form-control" placeholder="Targets">
      </div>
      <div class="form-group col-4 col-lg-2">
        <input type="number" class="form-control" placeholder="Avg Dmg">
      </div>
      <div class="form-group col-8 col-lg-4">
        <input type="text" class="form-control" placeholder="Damage">
      </div>
      <div class="form-group col-12 col-lg-6">
        <input type="text" class="form-control" placeholder="Damage type">
      </div>
    </div>
    <div class="form-group">
      <label>Effect</label>
      <textarea class="form-control" rows="3" placeholder="Enter the attack effect text"></textarea>
    </div>
  </span>
  <button (click)="addAttack()" class="btn btn-outline-secondary btn-block" type="button">Add Attack</button>

  <hr>

  <h3>Other</h3>
  <div class="form-row">
    <div class="form-group col-lg-6">
      <label>Climate</label>
      <ng-select [items]="climateList" [selectOnTab]="true" [hideSelected]="true" placeholder="Climate" [addTag]="true" multiple="true"></ng-select>
    </div>
    <div class="form-group col-lg-6">
      <label>Terrain</label>
      <ng-select [items]="terrainList" [selectOnTab]="true" [hideSelected]="true" placeholder="Terrain" [addTag]="true" multiple="true"></ng-select>
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label>Rarity</label>
      <input type="text" class="form-control" placeholder="Rarity">
    </div>
    <div class="form-group col-md-6">
      <label>Organization</label>
      <input type="text" class="form-control" placeholder="Organization">
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label>Activity Cycle</label>
      <input type="text" class="form-control" placeholder="Activity Cycle">
    </div>
    <div class="form-group col-md-6">
      <label>Diet</label>
      <input type="text" class="form-control" placeholder="Diet">
    </div>
  </div>

  <div class="form-group">
    <label>Physical Description</label>
    <textarea class="form-control" rows="3" placeholder="Physical Description"></textarea>
  </div>

  <div class="form-group">
    <label>Habitat/Society</label>
    <textarea class="form-control" rows="5" placeholder="Habitat/Society"></textarea>
  </div>

  <div class="form-group">
    <label>Ecology</label>
    <textarea class="form-control" rows="3" placeholder="Ecology"></textarea>
  </div>

  <hr>

  <h5>Magical Components</h5>
  <span class="components">
    <div class="form-group">
      <label>Item</label>
      <input type="text" class="form-control" placeholder="Item name">
    </div>
    <div class="form-group">
      <label>Source</label>
      <textarea class="form-control" rows="3" placeholder="Source/component"></textarea>
    </div>
    <div class="form-group">
      <button class="btn btn-outline-secondary btn-block" type="button">Add Component</button>
    </div>
  </span>

  <h5>Monster Relationships</h5>
  <span class="relationships">
    <div class="form-group">
      <label>Monster</label>
      <ng-select [items]="monsterList" [selectOnTab]="true" placeholder="Monster"></ng-select>
    </div>
    <div class="form-group">
      <label>Relationship</label>
      <textarea class="form-control" rows="3" placeholder="Relationship"></textarea>
    </div>
    <div class="form-group">
      <button class="btn btn-outline-secondary btn-block" type="button">Add Relationship</button>
    </div>
  </span>

  <div class="form-row">
    <div class="card bg-light border-0">
      <div class="card-body text-muted">
        <samp>
          {{ monsterForm.value | json }}
        </samp>
      </div>
    </div>
  </div>

  <div class="form-row justify-content-center">
    <div class="form-group col-md-4">
      <button class="btn btn-primary btn-xl btn-block" type="submit">Submit</button>
    </div>
  </div>
</form>
